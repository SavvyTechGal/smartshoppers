<div *ngIf="!newUser; else isNewUser" class="profilePage">

    <div class="body">
    <!--info available from auth0 token-->
    <div *ngIf="profileLoadedIn; else loadingProfile" class="container auth0-profile">
        <h1>Profile</h1>
        <br>
        <div *ngIf="auth.user$ | async as user">
            <div class="profile-header">
                <p><b>First Name:</b> {{ returnedUser?.firstName }} </p>
                <p><b>Last Name:</b> {{ returnedUser?.lastName }} </p>
                <p><b>Email:</b> {{ returnedUser?.email }} </p> 
                <p><b>Role:</b> {{ returnedUser?.role }} </p>           
            </div>
        </div>
        <button type="button" class="btn btn-border edit" routerLink="/edit-profile" >Edit Profile</button>
    </div>

    <ng-template #loadingProfile>
        <div class="container loadingProfile">
            <h6>Loading Profile!</h6>
            <div class="spinner-border"></div>
        </div>
    </ng-template>

    </div>
    <!--Saved Products-->
    <div *ngIf="hasSavedProducts; else nonSaved">

        <div *ngIf="loadedIn; else loading" class="savedSection">
            <h2>Saved Products</h2>

            <app-product-display 
                    [items]="savedProducts" [userEmail]="userEmail" [isSignedIn]="isSignedIn" [isSavedPage]=true>
            </app-product-display>
        </div>

        <ng-template #loading>
            <div class="loading">
                <h6>Loading Saved Products!</h6>
                <div class="spinner-border"></div>
            </div>
        </ng-template>
    </div>
    <!--if user has no saved products-->
    <ng-template #nonSaved>  
        <div class="nonSaved">
            <p>No saved products currently.</p>
        </div>
        
    </ng-template>

</div>

<ng-template #isNewUser>
    <div class="NewUser">
        <p>Oops! It seems you may have not finished setting up your profile...</p>
        <p>Click to complete Account Setup</p>
        <button class="btn btn-border" routerLink="/signupform" >Continue</button>

    </div>
</ng-template>


